{"ast":null,"code":"import _slicedToArray from\"/Users/georgehart/Documents/WebDev/MyProjects/hamtiltonharttech/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{navigate}from\"@reach/router\";import{makeStyles,Typography,Paper,Button,ClickAwayListener}from\"@material-ui/core\";import{useQuery,useMutation}from\"@apollo/react-hooks\";import{NOTE_QUERY,DELETE_NOTE,NOTES_QUERY}from\"../gql\";import{useToggle}from\"../utilities\";import{EditNote}from\"../components/Notes\";var useStyles=makeStyles(function(theme){return{subheading:{padding:theme.spacing(2),marginTop:theme.spacing(2),marginBottom:theme.spacing(2),backgroundColor:theme.palette.primary.main},noteContainer:{maxWidth:\"800px\",marginLeft:\"auto\",marginRight:\"auto\"},button:{marginTop:theme.spacing(2),marginBottom:theme.spacing(2)}};});export var NoteDetailPage=function NoteDetailPage(_ref){var noteId=_ref.noteId;var _useState=useState(noteId),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),deleteActive=_useState4[0],setDeleteActive=_useState4[1];var _useQuery=useQuery(NOTE_QUERY,{variables:{id:currentId}}),data=_useQuery.data,loading=_useQuery.loading,error=_useQuery.error;var _useMutation=useMutation(DELETE_NOTE),_useMutation2=_slicedToArray(_useMutation,2),deleteNote=_useMutation2[0],deleteError=_useMutation2[1].error;var _useToggle=useToggle(),editOn=_useToggle.on,editToggle=_useToggle.toggle;var ReactMarkdown=require(\"react-markdown\");var classes=useStyles();var handleDelete=function handleDelete(e){e.preventDefault();deleteNote({variables:{id:currentId},refetchQueries:[{query:NOTES_QUERY}],onCompleted:onDeleteCompleted()});};var onDeleteCompleted=function onDeleteCompleted(){console.log(\"Delete Completed\");navigate(\"/\");};return/*#__PURE__*/React.createElement(React.Fragment,null,loading&&/*#__PURE__*/React.createElement(\"h1\",null,\"Loading...\"),error&&/*#__PURE__*/React.createElement(\"h3\",null,error.message),data&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography,{variant:\"h3\",align:\"center\",gutterBottom:true},\"\".concat(data.note.title)),!editOn&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography,{className:classes.subheading,variant:\"subtitle1\",align:\"center\"},data.note.summary),/*#__PURE__*/React.createElement(Paper,{className:classes.noteContainer,elevation:0},/*#__PURE__*/React.createElement(ReactMarkdown,{source:data.note.bodyText}),!deleteActive&&/*#__PURE__*/React.createElement(Button,{className:classes.button,size:\"large\",variant:\"outlined\",color:\"error\",onClick:function onClick(){return setDeleteActive(true);}},\"Delete\"),deleteActive&&/*#__PURE__*/React.createElement(ClickAwayListener,{onClickAway:function onClickAway(){return setDeleteActive(false);}},/*#__PURE__*/React.createElement(Button,{className:classes.button,size:\"large\",color:\"warning\",variant:\"contained\",onClick:function onClick(e){return handleDelete(e);}},\"Delete\")),/*#__PURE__*/React.createElement(Button,{className:classes.button,color:\"primary\",variant:\"outlined\",size:\"large\",onClick:editToggle},\"Edit\"))),editOn&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(EditNote,{note:data.note,toggle:editToggle}))));};","map":{"version":3,"sources":["/Users/georgehart/Documents/WebDev/MyProjects/hamtiltonharttech/frontend/src/pages/NoteDetailPage.js"],"names":["React","useState","navigate","makeStyles","Typography","Paper","Button","ClickAwayListener","useQuery","useMutation","NOTE_QUERY","DELETE_NOTE","NOTES_QUERY","useToggle","EditNote","useStyles","theme","subheading","padding","spacing","marginTop","marginBottom","backgroundColor","palette","primary","main","noteContainer","maxWidth","marginLeft","marginRight","button","NoteDetailPage","noteId","currentId","setCurrentId","deleteActive","setDeleteActive","variables","id","data","loading","error","deleteNote","deleteError","editOn","on","editToggle","toggle","ReactMarkdown","require","classes","handleDelete","e","preventDefault","refetchQueries","query","onCompleted","onDeleteCompleted","console","log","message","note","title","summary","bodyText"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { navigate } from \"@reach/router\";\nimport {\n  makeStyles,\n  Typography,\n  Paper,\n  Button,\n  ClickAwayListener\n} from \"@material-ui/core\";\n\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { NOTE_QUERY, DELETE_NOTE, NOTES_QUERY } from \"../gql\";\nimport { useToggle } from \"../utilities\";\nimport { EditNote } from \"../components/Notes\";\n\nconst useStyles = makeStyles(theme => ({\n  subheading: {\n    padding: theme.spacing(2),\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n    backgroundColor: theme.palette.primary.main\n  },\n  noteContainer: {\n    maxWidth: \"800px\",\n    marginLeft: \"auto\",\n    marginRight: \"auto\"\n  },\n  button: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2)\n  }\n}));\n\nexport const NoteDetailPage = ({ noteId }) => {\n  const [currentId, setCurrentId] = useState(noteId);\n  const [deleteActive, setDeleteActive] = useState(false);\n\n  const { data, loading, error } = useQuery(NOTE_QUERY, {\n    variables: { id: currentId }\n  });\n\n  const [deleteNote, { error: deleteError }] = useMutation(DELETE_NOTE);\n\n  const { on: editOn, toggle: editToggle } = useToggle();\n\n  const ReactMarkdown = require(\"react-markdown\");\n  const classes = useStyles();\n\n  const handleDelete = e => {\n    e.preventDefault();\n    deleteNote({\n      variables: { id: currentId },\n      refetchQueries: [{ query: NOTES_QUERY }],\n      onCompleted: onDeleteCompleted()\n    });\n  };\n\n  const onDeleteCompleted = () => {\n    console.log(\"Delete Completed\");\n    navigate(\"/\");\n  };\n\n  return (\n    <>\n      {loading && <h1>Loading...</h1>}\n      {error && <h3>{error.message}</h3>}\n      {data && (\n        <>\n          <Typography variant=\"h3\" align=\"center\" gutterBottom>\n            {`${data.note.title}`}\n          </Typography>\n          {!editOn && (\n            <>\n              <Typography\n                className={classes.subheading}\n                variant=\"subtitle1\"\n                align=\"center\"\n              >\n                {data.note.summary}\n              </Typography>\n              <Paper className={classes.noteContainer} elevation={0}>\n                <ReactMarkdown source={data.note.bodyText} />\n                {!deleteActive && (\n                  <Button\n                    className={classes.button}\n                    size=\"large\"\n                    variant=\"outlined\"\n                    color=\"error\"\n                    onClick={() => setDeleteActive(true)}\n                  >\n                    Delete\n                  </Button>\n                )}\n                {deleteActive && (\n                  <ClickAwayListener onClickAway={() => setDeleteActive(false)}>\n                    <Button\n                      className={classes.button}\n                      size=\"large\"\n                      color=\"warning\"\n                      variant=\"contained\"\n                      onClick={e => handleDelete(e)}\n                    >\n                      Delete\n                    </Button>\n                  </ClickAwayListener>\n                )}\n                <Button\n                  className={classes.button}\n                  color=\"primary\"\n                  variant=\"outlined\"\n                  size=\"large\"\n                  onClick={editToggle}\n                >\n                  Edit\n                </Button>\n              </Paper>\n            </>\n          )}\n          {editOn && (\n            <>\n              <EditNote note={data.note} toggle={editToggle} />\n            </>\n          )}\n        </>\n      )}\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}